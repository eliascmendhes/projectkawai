---
import Layout from '../layouts/Layout.astro';
import PageTitle from '../components/PageTitle.astro';

const recommendations = {
  music: [
    {
      title: "Minecraft",
      artist: "C418",
      rating: 5,
      type: "Ambient, Electronic, IDM",
      description: "M√∫sica ic√¥nica que define a atmosfera do jogo Minecraft",
      image: "/images/musica/minecraft.jpg"
    },
    {
      title: "Is This It",
      artist: "The Strokes",
      rating: 5,
      type: "Rock, Indie",
      description: "√Ålbum que definiu o indie rock dos anos 2000",
      image: "/images/musica/isthisit.jpg"
    },
    {
      title: "Meat Is Murder",
      artist: "The Smiths",
      rating: 5,
      type: "Rock, Indie",
      description: "√Ålbum cl√°ssico que captura a ess√™ncia do indie alternativo",
      image: "/images/musica/meatismurder.jpg"
    },
    {
      title: "The Suburbs",
      artist: "Arcade Fire",
      rating: 5,
      type: "Rock, Indie",
      description: "Explorando vida suburbana e relembrando dos  velhos tempos.",
      image: "/images/musica/thesuburbs.jpg"
    }
  ],
  movies: [
    {
      title: "Aftersun",
      year: 2022,
      rating: 5,
      genre: "Drama",
      description: "Uma reflex√£o emocionante sobre mem√≥ria e relacionamento familiar",
      image: "/images/films/aftersun.jpg",
    },
    {
      title: "Sound of Metal",
      year: 2019,
      rating: 5,
      genre: "Drama",
      description: "Hist√≥ria poderosa sobre um baterista que perde a audi√ß√£o",
      image: "/images/films/soundofmetal.jpg",
    },
    {
      title: "Manchester by the Sea",
      year: 2016,
      rating: 5,
      genre: "Drama",
      description: "Drama intenso sobre perda, culpa e reden√ß√£o",
      image: "/images/films/manchesterbythesea.jpg"
    },
    {
      title: "Se7en",
      year: 1995,
      rating: 5,
      genre: "Crime, Mist√©rio, Thriller",
      description: "Thriller psicol√≥gico noir.",
      image: "/images/films/seven.jpg"
    }
  ],
  games: [
    {
      title: "Minecraft",
      platform: "PC, Xbox",
      rating: 5,
      type: "Sobreviv√™ncia e Constru√ß√£o",
      description: "Jogo que revolucionou os jogos de mundo aberto e criatividade",
      image: "/images/recomendacoes/minecraft.jpg"
    },
    {
      title: "Red Dead Redemption 2",
      platform: "PS4, Xbox, PC",
      rating: 5,
      type: "Mundo Aberto, Narrativo",
      description: "√âpico western com narrativa profunda e mundo imersivo",
      image: "/images/recomendacoes/rdr2.jpg"
    },
    {
      title: "The Sims 2",
      platform: "PC",
      rating: 5,
      type: "Simula√ß√£o de Vida",
      description: "Cl√°ssico da simula√ß√£o que definiu uma gera√ß√£o de jogadores",
      image: "/images/recomendacoes/ts2.jpg"
    },
    {
      title: "The Last of Us (Part 1 & 2)",
      platform: "PS4, PS5",
      rating: 5,
      type: "A√ß√£o-Aventura, Sobreviv√™ncia",
      description: "S√©rie que redefiniu narrativas em jogos de sobreviv√™ncia",
      image: "/images/recomendacoes/tlou.jpg"
    }
  ]
};

// Fun√ß√£o para renderizar estrelas de rating
function renderStars(rating: number) {
  return "‚ô°".repeat(rating);
}
---

<Layout title="Recomenda√ß√µes">
  <div class="max-w-5xl mx-auto px-4">
    <PageTitle title="Meus favoritos ‚ô°" />

    <!-- Navega√ß√£o -->
    <div class="flex justify-center gap-4 mb-6 nostalgic-nav">
      <button class="category-btn active px-3 py-1.5 rounded-full text-sm" data-category="music">
        ‚ô´ M√∫sica
      </button>
      <button class="category-btn px-3 py-1.5 rounded-full text-sm" data-category="movies">
        üé¨ Filmes
      </button>
      <button class="category-btn px-3 py-1.5 rounded-full text-sm" data-category="games">
        üéÆ Jogos
      </button>
    </div>

    <!-- Container das recomenda√ß√µes -->
    <div class="recommendations-container">
      <!-- Se√ß√£o M√∫sica -->
      <section id="music" class="recommendation-section active">
        <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-3">
          {recommendations.music.map(item => (
            <div class="recommendation-card bg-white/90 rounded-lg overflow-hidden">
              <div class="card-image relative w-full pt-[100%]">
                <img
                  src={item.image}
                  alt={item.title}
                  class="absolute top-0 left-0 w-full h-full object-cover"
                  loading="lazy"
                />
              </div>
              <div class="card-content p-2">
                <h3 class="font-[Mochiy+Pop+One] text-xs text-pink-600 truncate">{item.title}</h3>
                <p class="artist text-xs text-gray-600 truncate">{item.artist}</p>
                <div class="rating text-pink-400 text-xs mt-1">{renderStars(item.rating)}</div>
              </div>
            </div>
          ))}
        </div>
      </section>

      <!-- Se√ß√£o Filmes -->
      <section id="movies" class="recommendation-section">
        <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-3">
          {recommendations.movies.map(item => (
            <div class="recommendation-card bg-white/90 rounded-lg overflow-hidden">
              <div class="card-image relative w-full pt-[100%]">
                <img
                  src={item.image}
                  alt={item.title}
                  class="absolute top-0 left-0 w-full h-full object-cover"
                  loading="lazy"
                />
              </div>
              <div class="card-content p-2">
                <h3 class="font-[Mochiy+Pop+One] text-xs text-pink-600 truncate">{item.title}</h3>
                <p class="artist text-xs text-gray-600 truncate">{item.year}</p>
                <div class="rating text-pink-400 text-xs mt-1">{renderStars(item.rating)}</div>
              </div>
            </div>
          ))}
        </div>
      </section>

      <!-- Se√ß√£o Jogos -->
      <section id="games" class="recommendation-section">
        <div class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-3">
          {recommendations.games.map(item => (
            <div class="recommendation-card bg-white/90 rounded-lg overflow-hidden">
              <div class="card-image relative w-full pt-[100%]">
                <img
                  src={item.image}
                  alt={item.title}
                  class="absolute top-0 left-0 w-full h-full object-cover"
                  loading="lazy"
                />
              </div>
              <div class="card-content p-2">
                <h3 class="font-[Mochiy+Pop+One] text-xs text-pink-600 truncate">{item.title}</h3>
                <p class="artist text-xs text-gray-600 truncate">{item.platform}</p>
                <div class="rating text-pink-400 text-xs mt-1">{renderStars(item.rating)}</div>
              </div>
            </div>
          ))}
        </div>
      </section>
    </div>
  </div>
</Layout>

<style>
  /* Estilos Kawaii */
  .category-btn {
    background: linear-gradient(135deg, #FFB6C1, #FF69B4);
    color: white;
    box-shadow: 0 1px 4px rgba(255, 105, 180, 0.3);
  }

  .category-btn:hover {
    transform: translateY(-1px);
  }

  .category-btn.active {
    background: linear-gradient(135deg, #FF69B4, #FF1493);
  }

  .recommendation-card {
    box-shadow: 0 2px 4px rgba(255, 182, 193, 0.2);
  }

  /* Estilos Retr√¥ */
  :global(.nostalgic-mode) .category-btn {
    background: #d4d0c8;
    border: 1px outset #fff;
    border-radius: 0;
    box-shadow: none;
    font-family: 'MS Gothic', monospace;
    color: #000;
    padding: 1px 4px;
  }

  :global(.nostalgic-mode) .recommendation-card {
    background: #fff;
    border: 1px solid #999;
    border-radius: 0;
    box-shadow: 1px 1px 0 #666;
  }

  :global(.nostalgic-mode) .card-content {
    font-family: 'MS Gothic', monospace;
  }

  :global(.nostalgic-mode) .card-content h3 {
    color: #0000EE;
    text-decoration: underline;
  }

  /* Controle de visibilidade */
  .recommendation-section {
    display: none;
  }

  .recommendation-section.active {
    display: block;
  }

  .recommendation-card:hover {
    cursor: pointer;
  }

  :global(.nostalgic-mode) .recommendation-card:hover {
    background: #f0f0f0;
  }
</style>

<script>
  // Aguarda o DOM estar completamente carregado
  document.addEventListener('DOMContentLoaded', () => {
    const categoryBtns = document.querySelectorAll('.category-btn');
    const sections = document.querySelectorAll('.recommendation-section');

    categoryBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const category = btn.getAttribute('data-category');

        // Remove active de todos os bot√µes e adiciona ao clicado
        categoryBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        // Esconde todas as se√ß√µes e mostra a selecionada
        sections.forEach(section => {
          section.classList.remove('active');
          if (section.id === category) {
            section.classList.add('active');
          }
        });
      });
    });
  });
</script>
