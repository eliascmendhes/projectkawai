---
import Layout from '../layouts/Layout.astro';
import PageTitle from '../components/PageTitle.astro';

const recommendations = {
  music: [
    {
      title: "Minecraft",
      artist: "C418",
      rating: 5,
      type: "Ambient, Electronic, IDM",
      description: "M√∫sica ic√¥nica que define a atmosfera do jogo Minecraft",
      image: "/images/musica/minecraft.jpg"
    },
    {
      title: "Is This It",
      artist: "The Strokes",
      rating: 5,
      type: "Rock, Indie",
      description: "√Ålbum que definiu o indie rock dos anos 2000",
      image: "/images/musica/isthisit.jpg"
    },
    {
      title: "Meat Is Murder",
      artist: "The Smiths",
      rating: 5,
      type: "Rock, Indie",
      description: "√Ålbum cl√°ssico que captura a ess√™ncia do indie alternativo",
      image: "/images/musica/meatismurder.jpg"
    },
    {
      title: "The Suburbs",
      artist: "Arcade Fire",
      rating: 5,
      type: "Rock, Indie",
      description: "Explorando vida suburbana e relembrando dos  velhos tempos.",
      image: "/images/musica/thesuburbs.jpg"
    }
  ],
  movies: [
    {
      title: "Aftersun",
      year: 2022,
      rating: 5,
      genre: "Drama",
      description: "Uma reflex√£o emocionante sobre mem√≥ria e relacionamento familiar",
      image: "/images/films/aftersun.jpg",
    },
    {
      title: "Sound of Metal",
      year: 2019,
      rating: 5,
      genre: "Drama",
      description: "Hist√≥ria poderosa sobre um baterista que perde a audi√ß√£o",
      image: "/images/films/soundofmetal.jpg",
    },
    {
      title: "Manchester by the Sea",
      year: 2016,
      rating: 5,
      genre: "Drama",
      description: "Drama intenso sobre perda, culpa e reden√ß√£o",
      image: "/images/films/manchesterbythesea.jpg"
    },
    {
      title: "Se7en",
      year: 1995,
      rating: 5,
      genre: "Crime, Mist√©rio, Thriller",
      description: "Thriller psicol√≥gico noir.",
      image: "/images/films/seven.jpg"
    }
  ],
  games: [
    {
      title: "Minecraft",
      platform: "PC, Xbox",
      rating: 5,
      type: "Sobreviv√™ncia e Constru√ß√£o",
      description: "Jogo que revolucionou os jogos de mundo aberto e criatividade",
      image: "/images/recomendacoes/minecraft.jpg"
    },
    {
      title: "Red Dead Redemption 2",
      platform: "PS4, Xbox, PC",
      rating: 5,
      type: "Mundo Aberto, Narrativo",
      description: "√âpico western com narrativa profunda e mundo imersivo",
      image: "/images/recomendacoes/rdr2.jpg"
    },
    {
      title: "The Sims 2",
      platform: "PC",
      rating: 5,
      type: "Simula√ß√£o de Vida",
      description: "Cl√°ssico da simula√ß√£o que definiu uma gera√ß√£o de jogadores",
      image: "/images/recomendacoes/ts2.jpg"
    },
    {
      title: "The Last of Us (Part 1 & 2)",
      platform: "PS4, PS5",
      rating: 5,
      type: "A√ß√£o-Aventura, Sobreviv√™ncia",
      description: "S√©rie que redefiniu narrativas em jogos de sobreviv√™ncia",
      image: "/images/recomendacoes/tlou.jpg"
    }
  ]
};

// Fun√ß√£o para renderizar estrelas de rating
function renderStars(rating: number) {
  return "‚ô°".repeat(rating);
}
---

<Layout title="Recomenda√ß√µes">
  <div class="max-w-5xl mx-auto px-4">
    <PageTitle title="Meus favoritos">
      <span class="kawaii-content">Meus favoritos ‚ô°</span>
      <span class="retro-content">‚óÜ Meus favoritos ‚óÜ</span>
    </PageTitle>

    <!-- Navega√ß√£o -->
    <div class="flex justify-center gap-4 mb-6 nostalgic-nav">
      <button class="category-btn active" data-category="music">
        <div class="kawaii-content">
          <span class="kawaii-icon">‚ô´</span>
          <span class="kawaii-text">M√∫sica</span>
        </div>
        <div class="retro-content">[ M√∫sica ]</div>
      </button>
      <button class="category-btn" data-category="movies">
        <div class="kawaii-content">
          <span class="kawaii-icon">üé¨</span>
          <span class="kawaii-text">Filmes</span>
        </div>
        <div class="retro-content">[ Filmes ]</div>
      </button>
      <button class="category-btn" data-category="games">
        <div class="kawaii-content">
          <span class="kawaii-icon">üéÆ</span>
          <span class="kawaii-text">Jogos</span>
        </div>
        <div class="retro-content">[ Jogos ]</div>
      </button>
    </div>

    <!-- Container das recomenda√ß√µes -->
    <div class="recommendations-container nostalgic-container">
      <!-- Se√ß√µes de recomenda√ß√µes -->
      {Object.entries(recommendations).map(([category, items]) => (
        <section id={category} class={`recommendation-section ${category === 'music' ? 'active' : ''}`}>
          <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
            {items.map(item => (
              <div class="recommendation-card">
                <div class="card-image-container">
                  <img
                    src={item.image}
                    alt={item.title}
                    class="card-image"
                    loading="lazy"
                  />
                </div>
                <div class="card-content">
                  <h3 class="card-title">{item.title}</h3>
                  <p class="card-subtitle">
                    {category === 'music' ? item.artist :
                     category === 'movies' ? item.year :
                     item.platform}
                  </p>
                  <div class="card-rating">
                    <span class="kawaii-content">{renderStars(item.rating)}</span>
                    <span class="retro-content">{"‚òÖ".repeat(item.rating)}</span>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </section>
      ))}
    </div>
  </div>
</Layout>

<style>
  /* Estilos Kawaii atualizados */
  .category-btn {
    background: rgba(255, 255, 255, 0.9);
    border: 3px solid #FFC0CB;
    border-radius: 1.5rem;
    padding: 0.5rem 1.2rem;
    color: #FF1493;
    font-family: 'Cherry Bomb One', cursive;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .kawaii-content {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .kawaii-icon {
    font-size: 1.2rem;
    display: inline-block;
    transform-origin: center;
    transition: transform 0.3s ease;
  }

  .kawaii-text {
    font-size: 1rem;
  }

  .category-btn:hover {
    background: #FFE4E1;
    border-color: #FF69B4;
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(255, 105, 180, 0.2);
  }

  .category-btn:hover .kawaii-icon {
    transform: scale(1.2) rotate(10deg);
  }

  .category-btn.active {
    background: #FF69B4;
    color: white;
    border-color: #FF1493;
    box-shadow: 0 4px 15px rgba(255, 20, 147, 0.3);
  }

  /* Controle de visibilidade */
  .kawaii-content {
    display: flex;
  }

  .retro-content {
    display: none;
  }

  /* Modo Retr√¥ */
  :global(.nostalgic-mode) .kawaii-content {
    display: none !important;
  }

  :global(.nostalgic-mode) .retro-content {
    display: block !important;
  }

  /* Estilos Retr√¥  */
  :global(.nostalgic-mode) .category-btn {
    background: #c0c0c0;
    border: 2px solid;
    border-color: #ffffff #404040 #404040 #ffffff;
    box-shadow: inset -1px -1px #808080, inset 1px 1px #dfdfdf;
    color: #000000;
    font-family: 'MS Gothic', monospace;
    padding: 4px 12px;
    min-width: 100px;
    text-align: center;
    position: relative;
    border-radius: 0;
    transition: none;
    transform: none !important;
  }

  :global(.nostalgic-mode) .category-btn:hover {
    background: #d4d0c8;
  }

  :global(.nostalgic-mode) .category-btn.active {
    background: #000080;
    color: #ffffff;
    border-color: #404040 #ffffff #ffffff #404040;
    box-shadow: inset 1px 1px #000040, inset -1px -1px #0000c0;
  }

  :global(.nostalgic-mode) .category-btn:active {
    border-color: #404040 #ffffff #ffffff #404040;
    box-shadow: inset 1px 1px #808080, inset -1px -1px #dfdfdf;
    padding-top: 5px;
    padding-left: 13px;
  }

  /* Estilos Kawaii (originais) */
  .recommendation-card {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(8px);
    border-radius: 1rem;
    border: 4px solid #FFC0CB;
    padding: 1rem;
    transition: all 0.3s ease;
  }

  .recommendation-card:hover {
    transform: scale(1.02);
    border-color: #FF69B4;
    box-shadow: 0 10px 25px rgba(255, 105, 180, 0.2);
  }

  .card-image-container {
    border-radius: 0.5rem;
    overflow: hidden;
    margin-bottom: 0.5rem;
  }

  .card-image {
    width: 100%;
    aspect-ratio: 1;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .recommendation-card:hover .card-image {
    transform: scale(1.05);
  }

  .card-title {
    font-family: 'Cherry Bomb One', cursive;
    color: #FF1493;
    font-size: 1.1rem;
    margin-bottom: 0.25rem;
  }

  .card-subtitle {
    font-family: 'Pixel', sans-serif;
    color: #8A4FFF;
    font-size: 0.9rem;
  }

  .card-rating {
    color: #FF69B4;
    margin-top: 0.25rem;
  }

  /* Estilos para o modo retr√¥ */
  :global(.nostalgic-mode) .nostalgic-container {
    background: #c0c0c0;
    border: 2px solid;
    border-color: #ffffff #404040 #404040 #ffffff;
    box-shadow: inset -1px -1px #808080, inset 1px 1px #dfdfdf;
    padding: 8px;
  }

  :global(.nostalgic-mode) .recommendation-card {
    background: #c0c0c0;
    border: 2px solid;
    border-color: #ffffff #404040 #404040 #ffffff;
    box-shadow: inset -1px -1px #808080, inset 1px 1px #dfdfdf;
    padding: 4px;
    border-radius: 0;
    transform: none !important;
    transition: none !important;
  }

  :global(.nostalgic-mode) .card-image-container {
    border: 2px solid;
    border-color: #404040 #ffffff #ffffff #404040;
    box-shadow: inset 1px 1px #808080;
    padding: 2px;
    background: #ffffff;
    position: relative;
    border-radius: 0;
  }

  :global(.nostalgic-mode) .card-image {
    filter: grayscale(30%);
    image-rendering: pixelated;
    transform: none !important;
    transition: none !important;
  }

  :global(.nostalgic-mode) .card-content {
    padding: 4px;
    font-family: 'MS Gothic', monospace;
  }

  :global(.nostalgic-mode) .card-title {
    font-family: 'MS Gothic', monospace;
    color: #000080;
    font-size: 0.875rem;
    font-weight: bold;
    margin-bottom: 2px;
  }

  :global(.nostalgic-mode) .card-subtitle {
    font-family: 'MS Gothic', monospace;
    color: #000000;
    font-size: 0.75rem;
  }

  :global(.nostalgic-mode) .card-rating {
    color: #000080;
    font-size: 0.75rem;
    margin-top: 2px;
  }

  /* Classes de visibilidade */
  .recommendation-section {
    display: none;
  }

  .recommendation-section.active {
    display: block;
  }
</style>

<script>
  // Aguarda o DOM estar completamente carregado
  document.addEventListener('DOMContentLoaded', () => {
    const categoryBtns = document.querySelectorAll('.category-btn');
    const sections = document.querySelectorAll('.recommendation-section');

    categoryBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const category = btn.getAttribute('data-category');

        // Remove active de todos os bot√µes e adiciona ao clicado
        categoryBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        // Esconde todas as se√ß√µes e mostra a selecionada
        sections.forEach(section => {
          section.classList.remove('active');
          if (section.id === category) {
            section.classList.add('active');
          }
        });
      });
    });
  });
</script>
