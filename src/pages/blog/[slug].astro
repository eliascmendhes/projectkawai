---
import Layout from '../../layouts/Layout.astro';

const allPosts = await Astro.glob('../../posts/*.md');

const { slug } = Astro.params;
const post = allPosts.find(p => p.frontmatter.slug === slug);

if (!post) {
  return Astro.redirect('../404.astro');
}
---

<Layout title={post.frontmatter.title}>
  <article class="max-w-4xl mx-auto p-6">
    <div class="bg-white/90 backdrop-blur-sm rounded-3xl border-4 border-kawaii-lavender p-8 shadow-lg">
      <header class="mb-8">
        <h1 class="font-cherry text-4xl text-pink-600 mb-3">{post.frontmatter.title}</h1>
        <p class="font-pixel text-sm text-pink-400">
          ♡ Publicado em {post.frontmatter.date}
        </p>
      </header>

      <div class="flex flex-col md:flex-row gap-8">
        <div class="md:w-1/3 flex-shrink-0">
          <img
            src={post.frontmatter.image}
            alt={post.frontmatter.title}
            class="w-full aspect-square object-cover rounded-2xl border-2 border-pink-200 shadow-md hover:scale-105 transition-transform duration-300"
          />
        </div>

        <!-- Conteúdo à direita -->
        <div class="md:w-2/3">
          <div class="prose prose-pink max-w-none">
            <!-- Estilização do conteúdo -->
            <div class="font-pixel text-gray-700 leading-relaxed space-y-4">
              <Fragment set:html={post.compiledContent()} />
            </div>
          </div>
        </div>
      </div>

      <!-- Rodapé do artigo -->
      <footer class="mt-8 pt-6 border-t-2 border-pink-100">
        <div class="flex justify-between items-center">
          <a
            href="/blog"
            class="font-pixel text-pink-500 hover:text-pink-600 transition-colors flex items-center gap-2"
          >
            ← Voltar para o blog
          </a>
          <span class="font-pixel text-pink-400">♡ ♡ ♡</span>
        </div>
      </footer>
    </div>
  </article>
</Layout>

<style>
  /* Adiciona um fundo suave à página */
  /* article {
    background: linear-gradient(135deg, #fdf2f8 0%, #fcfcfc 100%);
  } */

  .prose {
    --tw-prose-body: theme('colors.gray.700');
    --tw-prose-headings: theme('colors.pink.600');
    --tw-prose-links: theme('colors.pink.500');
    --tw-prose-bold: theme('colors.pink.600');
  }
</style>
