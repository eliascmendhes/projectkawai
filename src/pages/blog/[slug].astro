---
import Layout from '../../layouts/Layout.astro';

const allPosts = await Astro.glob('../../posts/*.md');

const { slug } = Astro.params;
const post = allPosts.find(p => p.frontmatter.slug === slug);

if (!post) {
  return Astro.redirect('../404.astro');
}
---

<Layout title={post.frontmatter.title}>
  <article class="max-w-4xl mx-auto p-6">
    <div class="bg-white/90 backdrop-blur-sm rounded-3xl border-4 border-[#FFC0CB] p-8 shadow-lg">
      <header class="mb-8 text-center">
        <h1 class="font-[Dela+Gothic+One] text-4xl text-[#FF1493] mb-3">
          {post.frontmatter.title}
        </h1>
        <p class="font-[Mochiy+Pop+One] text-sm text-[#8A4FFF]">
          ğŸŒ¸ Publicado em {post.frontmatter.date} ğŸ¡
        </p>
      </header>

      <div class="flex flex-col md:flex-row gap-8">
        <div class="md:w-1/3 flex-shrink-0 group">
          <img
            src={post.frontmatter.image}
            alt={post.frontmatter.title}
            class="w-full aspect-square object-cover rounded-2xl border-2 border-[#FFB6C1] shadow-md 
            group-hover:scale-105 group-hover:rotate-2 transition-transform duration-300"
          />
        </div>

        <div class="md:w-2/3">
          <div class="prose prose-pink max-w-none">
            <div class="font-[Mochiy+Pop+One] text-[#333] leading-relaxed space-y-4">
              <Fragment set:html={post.compiledContent()} />
            </div>
          </div>
        </div>
      </div>

      <footer class="mt-8 pt-6 border-t-2 border-[#FFD1DC]">
        <div class="flex justify-between items-center">
          <a
            href="/blog"
            class="font-[Mochiy+Pop+One] text-[#FF1493] hover:text-[#FF69B4] transition-colors flex items-center gap-2"
          >
            â† Voltar para o blog
          </a>
          <span class="font-[Mochiy+Pop+One] text-[#FFD700]">
            ğŸ¡ ğŸŒ¸ â™¡ ğŸ° âœ§
          </span>
        </div>
      </footer>
    </div>
  </article>
</Layout>

<style>
  .prose {
    --tw-prose-body: theme('colors.gray.700');
    --tw-prose-headings: theme('colors.pink.600');
    --tw-prose-links: theme('colors.pink.500');
    --tw-prose-bold: theme('colors.pink.600');
  }

  body {
    background-image: 
      radial-gradient(rgba(255,192,203,0.1) 8%, transparent 8%),
      radial-gradient(rgba(255,192,203,0.1) 8%, transparent 8%);
    background-position: 0 0, 25px 25px;
    background-size: 50px 50px;
  }
</style>
